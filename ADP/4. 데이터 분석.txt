4. 데이터 분석 
ADP : https://m.blog.naver.com/PostView.naver?blogId=pouing_v&logNo=221478992938&navType=by

■ R의 데이터 구조란?
1. 벡터 
 : 벡터데이터 구조는 하나의 스칼라값, 혹은 하나 이상의 스칼라 원소들을 갖는 단순한 형태의 집합 의미
 x=c(1,10), y=c("사과", "바나나"), z=c(TURE, FALSE)
 논리연산자 벡터를 숫자형 벡터처럼 사용하는 경우, 
 자동적으로 "TRUE"는 1의 값을 할당, "FALSE"는 0의 값을 할당

2. 행렬
 : 행렬은 행과 열을 갖는 m*n형태의 직사각형 데이터를 나열한 데이터 구조
   행렬의 선언을 위해 명령어 matrix를 사용
※ 기본적으로 값들은 열을 우선 채우는 방향으로 입력

ㅁ 탐색적 자료 분석(박스플롯)
 - 최소값, 최대값, 중앙값, Q1, Q3
  1)1사분위, 3사분위를 박스 양끝에 그림
  2)박스 내, 세로선은 중앙값(Q2)
  3)박스플롯 하한은 Q1에서 아래쪽으로 1.5IQR
    박스플롯 상한은 Q3에서 위쪽으로 1.5IQR
  4)점선은 최소, 최대값
  5)이상치는 * 표시

ㅁ 확률변수
 : 표본공간에서 이루어지는 실험의 결과값
 : 특정사건이 일어난 확률은 그 변수가 측정값을 가질 확률
 : 특정값이 나타날 가능성이 확률적으로 주어지는 변수

ㅁ 파이썬
 1991년에 발표된 인터프리터 방식의 프로그래밍 언어이다.
 영어와 비슷해서 읽고 쓰기 쉬운 특유의 문법과 그로 인해 전 세계의 개발자들로부터 만들어진 수많은 패키지들 덕분에 사용할 수 있는 용도가 무궁무진해져 2010년대 중반부터 주류 프로그래밍 언어로 당당히 올라서게 되었다.

 1)이산확률변수
 2)연속확률변수
 : 구간이나 구간의 집합에 속한 값을 가지는 변수(측정가능)
 : 사건의 확률이 함수(면적)으로 표현, 이때 함수 f(x)를 확률밀도함수로 표현
 : 확률변수X 가 어떤 구간 안에 있는 모든 값을 취할 때, X를 연속확률변수라 함
 
 ㅁ 연속확률변수 vs 이산확률변수
1.확률변수에 대한 확률은 어떤 특정한 값을 가질 확률이 아니라, 주어진 구간에서의 속할 확률
2.어떤 연속확률변수가 구간x1, x2사이의 값을 가질 확률은 x1과 x2사이의 확률밀도함수 그래프의 아래 면적에 해당한다.
  또한, 연속확률변수가 어떤 구간내의 값을 가질 확률은, 그값이 경계값을 포함하는지 여부와 상관없다.
3.이상확률변수의 확률함수 f(x)는 확률변수가 어떤 특정값이 될 확률
  연속확률변수의 확률함수는 확률밀도함수로 그래프의 면적으로 확률을 나타낸다.

ㅁ 통계분석의 이해
 - 비모수 검정 : 통계적 검정에서 모집단의 모수에 대한 검정은 모수적 검정과 비모수적 검정으로 구분
 1) 모수적 방법
 - 검정하고자 하는 모집단의 분포에 대한 가정을 하고 그 가정하에서 검정통계량과 
 검정통계량의 분포를 유도해 검정을 실시하는 방법
 2) 비모주적 방법
- 자료가 추출된 모집단의 분포에 대한 아무 제약을 가하지 않고 검정을 실시하는 검정방법
- 관측된 자료가 특정분포를 따른다고 가정할 수 없는 경우 이용
- 관측된 자료의 수가 많지 않거나 자료가 개체간의 서열관계를 나타내는 경우
 3) 비모수 검정과 모수적 검정과의 차이점
 ㅇ 가설의 설정
 - 모수적 검정 : 가정된 분포의 모수에 대해 가설을 설정
 - 비모수 검정 : 가정된 분포가 없으므로 가설은 단지 '분포의 형태가 동일하다' 또는
  '분포의 형태가 동일하지 않다' 와 같이 분포의 형태에 대해 설정
 ㅇ 검정 방법
 - 모수적 검정 : 관측된 자료를 이용해 구한 표본평균, 표본분산 등을 이용해 검정을 실시
 - 비모수 검정 : 관측값의 절대적인 크기에 의존하지 않는 관측값들의 순위나 두 관측값 차이의 부호 등을 이용해 검정
 4)비모수검정의 예 : 부호검정, 윌콕슨의 순위함검정, 윌콕슨의 부호순위합검정, 만-위트니의U검정, 런검정,
  스피어만의 순위상관계수
 5)p값 : 귀무가설을 기각할 수 있는 최소의 유의수준
 : 위에 주어진 p값의 정의에 의하면 귀무가설(H0)을 기각하려면 최소한 P값 정도의 위험률은 감수할 수 있어야 함
 
ㅁ 가설
 - 귀무가설(H0) : 과거사실, 진리 / - 대립가설(H1) : 주장, 최근사실
 P값 < 유의수준(a=0.05, 0.01 ..) -> 귀무가설 기각, 대립가설 채택
 귀무가설이 사실일 때, 관측된 검정통계량의 값보다 더 대립가설을 지지하는 검정통계량이 나올 확률 P값
 이 값이 미리주어진 기준값인 유의수준(a)보다 작으면 귀무가설 기각!

ㅁ 1종오류와 2종오류
 - 1종오류 : 귀무가설이 참인데, 귀무가설 기각/대립가설 채택
 - 2종오류 : 대립가설이 참인데, 대립가설 기각, 귀무가설(참) 채택

ㅁ 검증방법
 - 홀드아웃 : 데이터를 랜덤하게 두 분류로 분리하여 실험데이터와 평가데이터로 설정하고
  검정을 실시하는 모형 평가 방법
 - K-FOLD CROSS VALIDATION : 데이터 K개를 집단으로 나눈 뒤 K-1개의 집단으로 분류기를 학습시키고
  나머지 1개의 집단으로 분류기의 성능을 테스트하는 방법. 위 과정을 K번 반복한다.
  문제의 그림에서는 데이터를 10개의 집단으로 나누고 9개의 집단으로 학습시키고 나머지 1개의 집단으로
  성능을 테스트하는 과정을 10번 반복한다.
 - 부스트랩 : 동일한 크기의 표본을 랜덤 복원추출로 뽑은 자료를 의미. 
  이 과정을 반복할 때 하나의 관측치가 선정되지 않아 검증용 자료로 사용되는 비율은 38.6%이다.

ㅁ 가설
 - 귀무가설(H0) : 과거사실, 진리 / - 대립가설(H1) : 주장, 최근사실
 P값 < 유의수준(a=0.05, 0.01 ..) -> 귀무가설 기각, 대립가설 채택
 귀무가설이 사실일 때, 관측된 검정통계량의 값보다 더 대립가설을 지지하는 검정통계량이 나올 확률 P값
 이 값이 미리주어진 기준값인 유의수준(a)보다 작으면 귀무가설 기각!

ㅁ 군집분석
: N개의 개체를 유사한 성격을 가지는 몇 개의 군집으로 집단화하고 형성된 군집들의 특성을 파악하여 군집들 사이의 관계를 분석하는 다변량 분석기법
1.계층적 군집 : 두 군집간의 거리 측정에 따라 병합방법이 달라짐
1)최단연결법 2)최장연결법 3)중심연결법 4)와드연결법 : 군집내의 오차제곱합에 기초하여 군집수행
* 그외 다양한 군집간 거리를 통해 수행가능(단, 모든변수가 연속형일 경우에만)
 - 유클리드, 맨하튼, 민코우스키, 표준화 


2.K-평균수집
 : 원하는 군집만큼(k개) 초기값을 지정하고 각 개체(데이터)를 가까운 초기값에 할당하여 군집을 형성한 뒤,
   각 군집의 평균을 재계산하여 초기값 갱신, 갱신된 값에 대해 위 할당과정 반복하여 k개 최종군집 형성
   (장) 알고리즘 단순, 빠르게 수행, 많은 양의 자료 다룰 수 있음
   (단) 이상값에 영향 많이 받음
   
3. 혼합분포군집 EM알고리즘
: 모형-기반의 군집방법으로 데이터 k개의 모수적 모형의 가중합으로 표현되는 모집단 모형으로부터 나왔다는 가정하에
 모수와 함께 가중치를 자료로부터 추정하는 방법 사용.
: k개의 각 모형은 군집을 의미하며 각 데이터는 추정된 k개의 모형 중, 어느 모형으로부터 나왔을 확률이 높은지에 따라 군집분류가 이루어짐
: k평균군집의 절차와 유사하나 확률분포를 도입하여 군집을 수행하는 모형 기반의 군집방법
: 군집을 몇 개의 모수로 표현할 수 있으며 사로 다른 크기나 모양이 군집을 찾을 수 있음

4. SOM
: 비지도신경망으로 고차원의 데이터를 이해하기 쉬운 저차원의 뉴런으로 정렬하여 지도의 형태로 형상화한다.
  이러한 형상화는 입력변수의 위치관계를 그대로 보존한다. SOM 모델은 입력층과 경쟁층으로 구성된다.
: 경쟁층의 각 뉴런은 연결강도 벡터와 입력벡터가 얼마나 가까운가를 계산
 그리고 각 뉴런들은 학습할 수 있는 특권을 부여받으려고 서로 경쟁하는데, 거리가 가장 가까운 뉴런이 승리함
 이 승자 뉴런이 출력신호를 보낼 수 있는 유일한 뉴런이다.
 또한, 이 뉴런와 이와 인접한 이웃 뉴런들만 제시된 입력 벡터에 대하여 학습이 허용됨

ㅁ SOM의 학습알고리즘
1)SOM맵의 노드에 대한 연결강도 초기화
2)입력벡터 제시
3) 3-1)유클리드 거리 사용하여 입력벡터와 프로토타입 벡터 사이 유사도 구함
 3-2) 입력벡터와 가장 거리가 짧은 프로토타입 벡터 방식
4)프로토타입 벡터와 그 이웃들의 연결강도 재조정
5)단계2로 가서 반복

ㅁ 의사결정나무
의사결정나무 중 가지치기 단계는 오차를 크게 할 위험이 높거나 부적절한 추론 규칙을 가지도 있는 가지 또는 불필요한 가지를 제거하는 단계이다.
가치치기 : 오차를 크게 할 위험이 높거나 부적절한 출론 규칙을 가지고 있는 가지 또는 불필요한 가지를 제거하는 단계

* 의사결정나무모형에서 핵심적인 공통 개념은 하향식 기법이 사용되며 각 진행 단계에서는 주어진 데이터 집합을 가장 적합한 기준으로 분할하는 변수값이 선택된다.
 홀드 아웃 : 데이터의 양이 충분하지 않거나 입력 변수에 대한 설명이 충분한 경우에 사용하는 모형평가 방법으로 주어진 데이터를 랜덤하게 두 개의 데이터로 구분하여 사용하는 방법이다.
 가치치기 : 오차를 크게 할 위험이 높거나 부적절한 출론 규칙을 가지고 있는 가지 또는 불필요한 가지를 제거하는 단계
 - 의사결정나무 중 가지치기 단계는 오차를 크게 할 위험이 높거나 부적절한 추론 규칙을 가지도 있는 가지 또는 불필요한 가지를 제거하는 단계이다.
 뿌리마다 아래로 내려갈수록 각 마디의 불순도는 점차 감소한다.
 
ㅁ 연관규칙 : 항목들간의 조건-결과 식으로 표현되는 유용한 패턴을 말한다. 이러한 패턴, 규칙을 발견해내는 것을 연관 분석이라 한다.
 - 최소지지도를 갖는 연관규칙을 찾는 대표적인 방법은 apriori 알고리즘이다. 최소지지도보다 큰 집합만을 대상으로 높은 지지도를 갖는 품목을 찾는 방법이다. 
 - 도출된 연관규칙이 얼마나 융용한지 평가하기 위한 몇가지 측정 자료로는 지지도, 신뢰도, 향상도이다.
 - 사건들이 어떤 순서로 일어나고 이 사건들 사이에 연관성이 있는지 알아내기 위해서는 판매 시점에서 기록된 고객의 성별, 나이 등의 정보가 필요하다.
 
 - 향상도
  . A항목을 구매하지 않고 B항목을 구매하는 확률에 비해 A항목을 구매하고 B항목을 구매하는 확률의 비율이다.
  . 향상도(left) = P(A교집합B) / P(A)*P(B)
 . 전체 거래 중 A항목과 B항목이 얼마나 빈번하게 구매되고 있는지를 평가하는 측도이다.

ㅁ 연관분석 Apriori 알고리즘
Apriori 알고리즘(최소지지도를 갖는 연관규칙) 분석절차
1)최소 지지도 설정
2)최소 지지도를 넘는 모든 품목 찾기
3)최소 지지도를 넘는 2가지 품목 집합찾기
4)위 두 절차서 찾은 품못집합 결합해서 최소 지지도를 넘는 3가지 품목 집합 차지
 (장) 1.if-then 조건반응으로 표현, 결과이해 쉬움 2.데이터 변환없이 사용 3.계산용이
 (단) 1.품목많은 시 상단수 계산 2.적절한 품목 결정

ㅁ 연관규칙 측정지표
1.지지도(support) : 전체 거래 중 품목 A,B 동시에 포함되는 거래 비율
 - A와 B가 동이세 포함된 거래수 / 전체 거래수
2.신뢰도(confidence) : 품목A가 포함된 거래 중 A,B 동시에 포함하는 거래일 확률은?
 - A와 B가 동시에 포함된 거래수 / A를 포함하는 거래수
3.향상도(lift) : 품목 B를 구매한 고객대비 / 품목 A를 구매 후, B를 구매하는 고객 확률
 - 향상도 > 1 : 예측우수 / 향상도 = 1 : 두 품목간 연관X / 향상도 < 1 : A,B 연관성 X

ㅁ ROC 그래프
: 두 분류 분석 모형을 비교 분석결과를 가시화 하는 평가도구
: ROC 그래프의 밑면적 부분(AUC)이 넓을수록 좋은 모형으로 평가. 모형의 AUC가 1(넓이)에 가까울수록 좋은 모형
neural_ROC <- ROC(form = case~not_pred, plot = "ROC")

ㅁ 이익도표와 향상도 곡선
- 이익도표 : 분류분석 모형을 사용하여 분류된 관측치가 각 등급별로 얼마나 포함되는지를 나타내기 위한 도표
- 향상도 곡선 : 랜덤모델과 비교하여 해당 모델의 성과가 얼마나 향상되었는지를 각 등급별로 파악하는 그래프
모델평가

4장 통계분석
1절 통계분석의 이해
통계 : 특정집단을 대상으로 수행한 조사나 실험을 통해 나온 결과에 대한 요약된 형태의 표현

나.표본조사
 - 대부분의 설문조사가 표본보사로 진행되며 모집단에서 샘플을 추출하여 진행하는 조사
 - 모집단 : 조사하고자 하는 대상 집단 전체
 - 원소 : 모집단을 구성하는 개체
 - 표본 : 조사하기 위해 추출한 모집단의 일부 원소
 - 모수 : 표본 관측에 의해 구하고자 하는 모집단에 대한 정보
 - 모집단의 정의, 표본의 크기, 조사방법, 조사기간, 표본추출방법을 정확히 명시

다.표본추출방법
 - 단순랜덤추출법 : 각 샘플에 번호를 부여하여 임의의 n개를 추출하는 방법으로 각 샘플은 선택될 확률이 동일
 - 계통추출법 : 단순랜덤추출법의 변형된 방식으로 번호를 부여한 샘플을 나열하여 K개씩 N개의 구간으로 나누고 첫 구간에서 하나를 임의로 선택한 후에 K개씩 띄어서 N개의 표본을 선택한다. 즉, 임의 위치에서 매 K번째 항목을 추출하는 방법
 - 집락추출법 : 군집을 구분하고 군집별로 단순랜덤 추출법을 수행한 후, 모든 자료를 활용하거나 샘플링 하는 방법(지역표본추출, 다단계표본추출)
 - 층화추출법 : 이질적인 원소들로 구성된 모집단에서 각 계층을 고루 대표할 수 있도록 표본을 추출하는 방법으로 유사한 원소끼리 몇 개의 층으로 나누어 각 층에서 랜덤 추출하는 방법
 (비례층화 추출법, 불비례층화 추출법)

ㅁ 주성분 분석 PCA
 상관관계가 있는 고차원자료를 자료의 변동을 최대한 보존하는 저차원 자료로 변환시키는 방법.

ㅁ 앙상블
1번 배깅 그기가 같은 표본을 여러번 단순 임의복원추출하여 각 표본에 대한 분류기 생성 후, 그결과를 앙상블 하는 방법
2번 부스팅 표본을 구성하는 재표본과정에서 분류기가 잘못된 데이터에 더 큰가중을 주어 표본추출
3번 랜덤포레스트 배깅과정에 랜덤과정을 추가
붓스트램 샘플추출 -> 트리형성 -> 예측변수임의추출 > 추출된변수에서 최적의 분할을 만

CH4. 데이터 분석
1장 R기초와 데이터 마트
ㅁ 데이터가공 및 데이터관리
 1.변수의 구간화
  1)binning : 연속형 변수를 범주형 변수로 변환하기 위해 데이터의 의미를 파악하면서 구간을 축소
  2)의사결정나무 : 모형을 이용해 연속형변수를 범주형 변수로 변환
 2.결측값 처리
  1)데이터가 없는 경우 : NA, 999999, Unknown 등
  2)단순대치법
   - completes analysis : 삭제
   - 평균대치법 : 평균으로 대치
    . 비조건부 평균 대치법 : 관측 데이터의 평균으로 대치
    . 조건부 평균 대치법 : 회귀분석을 통해 데이터를 대치법
  3)다중대치법 : 단순 대치법을 m번 실시하여 m개의 가상적 자료를 만들어 대치
  
 3.이상값 처리
  - bad data : 잘못 입력된 값이나 분석 목적에 부합하지 않는 값 삭제
  - 이상값 : 극단값
  1)이상값의 인식
   - 평균으로부터 3표준편차 떨어진 값
   - 기하평균보다 2.5표준편차 이상 떨어진 값
   - 1사분위와 3분위 값에서 범위보다 2.5배이상 떨어진 값
  2)이상값의 처리
   - 절단 : 삭제
   - 조정 : 조정

2장 통계 분석
 - 통계 : 결과에 대한 요약된 형태의 표현
 1.자료 획득 방법 : 총조사, 표본조사
  - 모집단 : 전체집단
  - 표본집단 : 조사를 수행하기 위해 추출한 모집단의 일부
  - 모수 : 표본 관측에 의해 구하고자 하는 모집단에 대한 정보(평균, 분산)
  - 통계량 : 모수를 추론하기 위해 구하는 표본의 값들
  
 2.표본추출 방법
  1)단순랜덤추출법
   - 각 샘플에 번호를 부여하여 임의의 n개를 추출하는 방법으로 각 샘플은 선택될 확률이 동일
   - 복원, 비복원 추출 / 제비뽑기, 난수표뽑기
  2)계통추출법
   - 단순랜덤추출법의 변형된 방식으로 번호를 부여한 샘플을 나열하여 k개씩 n개의 구간으로 나누고 
     첫 구간에서 하나를 임의로 선택한 후에 k씩 띄어서 표본을 선택, 임의의 위치에서 매 k번째 항목 추출
  3)집락추출법
   - 군집을 구분하고 군집별로 단순랜덤추출법을 한 후 모든 자료를 활용하거나 샘플링하는 방법
   - 지역표본추출, 다단계표본추출
  4)층화추출법
   - 이질적인 원소들로 구성된 모집단에서 각 계층을 고루 대표할 수 있도록 표본을 추출하는 방법,
     유사한 원소끼리 몇개의 층으로 나누어 각 층에서 랜덤추출하는 방법

ㅁ 탐색적 자료 분석(박스플롯)
 - 최소값, 최대값, 중앙값, Q1, Q3
  1)1사분위, 3사분위를 박스 양끝에 그림
  2)박스 내, 세로선은 중앙값(Q2)
  3)박스플롯 하한은 Q1에서 아래쪽으로 1.5IQR
    박스플롯 상한은 Q3에서 위쪽으로 1.5IQR
  4)점선은 최소, 최대값
  5)이상치는 * 표시

ㅁ 확률변수
 : 표본공간에서 이루어지는 실험의 결과값
 : 특정사건이 일어난 확률은 그 변수가 측정값을 가질 확률
 : 특정값이 나타날 가능성이 확률적으로 주어지는 변수

 1)이산확률변수
 2)연속확률변수
 : 구간이나 구간의 집합에 속한 값을 가지는 변수(측정가능)
 : 사건의 확률이 함수(면적)으로 표현, 이때 함수 f(x)를 확률밀도함수로 표현
 
 ㅁ 이산확률분포
 1)확률분포 : 확률변수의 값에 확률이 어떻게 분포되어 있는지를 나타냄
 2)확률함수 : 확률변수 x의 특정값에 확률을 부여하는 함수
 
 ㅁ 연속확률변수 vs 이산확률변수
  1.확률변수에 대한 확률은 어떤 특정한 값을 가질 확률이 아니라, 주어진 구간에서의 속할 확률
  2.어떤 연속확률변수가 구간x1, x2사이의 값을 가질 확률은 x1과 x2사이의 확률밀도함수 그래프의 아래 면적에 해당한다.
    또한, 연속확률변수가 어떤 구간내의 값을 가질 확률은, 그값이 경계값을 포함하는지 여부와 상관없다.
  3.이상확률변수의 확률함수 f(x)는 확률변수가 어떤 특정값이 될 확률
    연속확률변수의 확률함수는 확률밀도함수로 그래프의 면적으로 확률을 나타낸다.
    
ㅁ 통계분석의 이해
 - 비모수 검정 : 통계적 검정에서 모집단의 모수에 대한 검정은 모수적 검정과 비모수적 검정으로 구분
 
 1) 모수적 방법
 - 검정하고자 하는 모집단의 분포에 대한 가정을 하고 그 가정하에서 검정통계량과 
   검정통계량의 분포를 유도해 검정을 실시하는 방법
 
 2) 비모수적 방법
 - 자료가 추출된 모집단의 분포에 대한 아무 제약을 가하지 않고 검정을 실시하는 검정방법
 - 관측된 자료가 특정분포를 따른다고 가정할 수 없는 경우 이용
 - 관측된 자료의 수가 많지 않거나 자료가 개체간의 서열관계를 나타내는 경우
 
 3) 비모수 검정과 모수적 검정과의 차이점
 ㅇ 가설의 설정
 - 모수적 검정 : 가정된 분포의 모수에 대해 가설을 설정
 - 비모수 검정 : 가정된 분포가 없으므로 가설은 단지 '분포의 형태가 동일하다' 또는
  '분포의 형태가 동일하지 않다' 와 같이 분포의 형태에 대해 설정

 ㅁ 군집분석
 - 군집의 실행 가능성 : 군집분석 결과에 대한 해석이 논리적으로 맞는지 판단. 각 군집의 요약 통계량을 구하는 방법을 이용
 - 군집의 안정성을 확인하기 위해서 데이터를 집합 A와 B로 나누고 한 부분에서의 군집을 다른 부분에 적용하여 얼마나 일관성이 있는지 조사하는 방법을 이용한다.
 - 유사성 측도인 거리 측정방법이 달라진다고 해서 군집분석의 결과가 달라지지는 않는다.
  따라서, 군집분석의 결과에 대한 평가는 군집분석에서 중요한 변수가 누락되었는지 등을 파악하는 것이 필요하다.
 - 군집분석 결과해석 Sample A
 전체 변동에서 군집간 변동이 차지하는 비율이 1에 가까울수록 잘 분류되었고 좋은 모델임을 나타낸다. 군집간 변동이 차지하는 비율은 betweenss(군집과 군집간 중심의 거리 제곱합)/totss(제곱합의 총합)으로 구할 수 있다. 해당 분석 결과에 대해 확인했을때, 4,5개의 군집으로 나누엇을 때보다 5개의 군집으로 나누었을 때 80.6^로 가장 군집이 잘 되었다고 판단할 수 있다. 도, kmeans clustering으로 5개의 군집으로 나눈 결과에서도 80.^로 아난탄 전체 변공에서 군집간 변동이 차지하는 비율을 확인할 수 있다. 또, 최적 군집의 수를 정하는 방법으로는 군집수에 따른 집단 내 제곱합 그래프를 통해 Scree plot 형태로 그래프를 그려 급격히 감소하는 지점까지만 군집으로 설정하여 최적의 군집 개수를 지정하거나 R프로그램에서 Nbclust 패키지의 Nbclust 함수를 활용하여 최적의 군집을 정하는 방법도 있다.

ㅁ 회귀분석 : 하나 또는 그 이상의 변수들이 또 다른 변수에 미치는 영향에 대해 추론할 수 있는 통계기법

ㅁ 체크사항
 1) 모형이 통계적으로 유의미한가?
 : F통계량 확인. 유의수준 5% 하에서 F통계량의 p값이 0.05보다 작으면 회귀식은 통계적으로 유의
 2) 회귀계수들의 유믜이?
 : 해당 계수의 t통계량과 p값 또는 이들의 신뢰구간 확인
 3)모형이 얼마나 설명력을 갖는가?
 : 결정계수(R, 0~1) 확인
 4)모형이 데이터를 잘 적합하고 있는가?
 : 잔차를 그래프로 그리고 회귀진단
 5)가정
 - 선형성 : 독립변수 변화에 따라 종속변수도 일정크기로 변화
 - 독립성 : 잔차와 독립변수와 값이 관련돼 있지 않음
 - 등분산성 : 독립변수의 모든 값에 대해 오차들의 분산 일정
 - 비상관성 : 관측치들의 잔차들끼리 상관이 없어야 함
 - 정상성 : 잔차항이 정규분포를 이루어야 함
 
 ㅁ 다변량 분석
1.상관분석 : 데이터 안의 두변수간의 관계
1)피어슨 상관계수 -1<=p<=1, x와y가 독립이면 p=0
 :단위에 영향을 받지 않고 언제나 -1과 1사이의 값을 갖음
 :선형관계의 크기 측정
2)스피어만 상관계수
 :두 변수를 모두 순위로 변환 후, 두 순위 사이의 피어슨 상관계수 정의
 :두 변수간 비선형적인 관계도 나타냄     

ㅁ 모형평가
1. 모형평가 기준
1)일반화 가능성(다른데이터에도 적용 가능 여부) 2)효율성(적은 데이터 입력하여도 효율성 상승) 3)정확성

2. 분류분석 모형의 평가를 위해 훈련용/검증용 자료 추출 방법
1)홀드아웃 : 원천데이터를 랜덤하게 분류
2)교차검증 : 주어진 데이터를 가지고 반복적으로 성과 측정 후, 결과를 평균화한 것으로 분류분석 모형 평가
3)붓스트랩 : 훈련용 자료를 반복 재선정(복원추출법) , 전체 데이터양이 크지 않은 경우의 모형평가에 적합

3.분류모형평가를 위해 범주형 변수에 대표적으로 사용되는 방법
1)오분류표
2)정분류율 : TP + TN / P + N
3)오분류율 : 1 - 정분류율 = FP + FN / P + N
4)민감도 : TP / P 실제값이 T인 관측치 중 예측치가 적중한 정도
5)특이도 : TN / N 실제값이 F인 관측치 중 예측치가 적중한 정도
6)정확도 : TP / TP + FP
7)재현율 : TP / TP + FN

- 정분류율 : 전체 관측치 중 실제값과 예측치가 일치한 정도를 나타냄.
 정분류율은 범주의 분포가 균형을 이룰 때 효과적인 평가지표
- 오분류율 : 모형이 제대로 예측하지 못한 관측치를 평가하는 자료.
전체 관측치 중 실제값과 예측치가 다른 정도를 나타냄
- 민감도, 특이도 : 민감도는 실제값이 True인 관측치 중 예측치가 적중한 정도 특이도는 실제값이 False인 관측치 중 예측치가 적중한 정도
- 정확도 : True로 예측한 관측치 중 실제값이 True인 정도를 나타내는 정확성 지표
- 재현율 : 실제값이 True인 관측치 중 예측치가 적중한 정도를 나타내는 민감도와 동일한 지표로 모형의 완전성을 평가하는 지표

ㅁ ROC 
: 두 분류 분석 모형을 비교 분석결과를 가시화 하는 평가도구
: ROC 그래프의 밑면적 부분(AUC)이 넓을수록 좋은 모형으로 평가. 모형의 AUC가 1(넓이)에 가까울수록 좋은 모형
neural_ROC <- ROC(form = case~not_pred, plot = "ROC")

ㅁ 이익도표와 향상도 곡선
- 이익도표 : 분류분석 모형을 사용하여 분류된 관측치가 각 등급별로 얼마나 포함되는지를 나타내기 위한 도표
- 향상도 곡선 : 랜덤모델과 비교하여 해당 모델의 성과가 얼마나 향상되었는지를 각 등급별로 파악하는 그래프

ㅁ 군집분석
: N개의 개체를 유사한 성격을 가지는 몇 개의 군집으로 집단화하고 형성된 군집들의 특성을 파악하여 군집들 사이의 관계를 분석하는 다변량 분석기법
1.계층적 군집 : 두 군집간의 거리 측정에 따라 병합방법이 달라짐
1)최단연결법 2)최장연결법 3)중심연결법 4)와드연결법 : 군집내의 오차제곱합에 기초하여 군집수행
* 그외 다양한 군집간 거리를 통해 수행가능(단, 모든변수가 연속형일 경우에만)
 - 유클리드, 맨하튼, 민코우스키, 표준화 

ㅁ 모형평가
1. 모형평가 기준
1)일반화 가능성(다른데이터에도 적용 가능 여부) 2)효율성(적은 데이터 입력하여도 효율성 상승) 3)정확성
